generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DATABASE_DIRECT_URL")
}

model User {
  id              String            @id @default(cuid())
  firstName       String
  lastName        String
  profilePic      String?
  major           String
  minor           String?
  createdAt       DateTime          @default(now())
  updatedAt       DateTime?         @updatedAt
  address         String?
  username        String            @unique
  EventAttendance EventAttendance[]
  orgs            Org[]             @relation("OrgToUser")
}

model Event {
  id              String            @id @default(cuid())
  name            String
  description     String
  startTime       DateTime
  location        String
  organizer       String
  category        String?
  coverImg        String?
  createdAt       DateTime          @default(now())
  updatedAt       DateTime?         @updatedAt
  messages        String[]
  EventAttendance EventAttendance[]
}

model Org {
  id          String    @id @default(cuid())
  name        String
  description String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime? @updatedAt
  color       String?
  orgPicture  String?
  officers    Json[]    @default([])
  category    String?
  members     User[]    @relation("OrgToUser")
}

model EventAttendance {
  id       String   @id
  userId   String
  eventId  String
  signedUp DateTime @default(now())
  attended Boolean  @default(false)
  Event    Event    @relation(fields: [eventId], references: [id])
  User     User     @relation(fields: [userId], references: [id])

  @@unique([userId, eventId])
}
